name: Stale Issues and PRs

on:
  schedule:
    # 每天 UTC 00:00 运行（北京时间 08:00）
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest

    permissions:
      issues: write
      pull-requests: write

    steps:
      - uses: actions/stale@v9
        with:
          # Stale issues 配置
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          stale-issue-message: |
            这个 Issue 已经 60 天没有活动了。

            如果这个问题仍然存在，请回复此 Issue 以保持其活跃状态。
            否则，它将在 14 天后自动关闭。

            This issue has been inactive for 60 days.
            If the problem still exists, please reply to keep it active.
            Otherwise, it will be automatically closed in 14 days.
          close-issue-message: |
            由于长时间没有活动，这个 Issue 已被自动关闭。

            如果问题仍然存在，请重新打开或创建新的 Issue。

            This issue has been automatically closed due to inactivity.
            If the problem persists, please reopen or create a new issue.
          exempt-issue-labels: 'pinned,security,roadmap,help-wanted'

          # Stale PRs 配置
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          stale-pr-message: |
            这个 Pull Request 已经 30 天没有活动了。

            请更新此 PR 或回复以保持其活跃状态。
            否则，它将在 7 天后自动关闭。

            This pull request has been inactive for 30 days.
            Please update or reply to keep it active.
            Otherwise, it will be automatically closed in 7 days.
          close-pr-message: |
            由于长时间没有活动，这个 Pull Request 已被自动关闭。

            如果你想继续这个工作，请重新打开或创建新的 PR。

            This pull request has been automatically closed due to inactivity.
            If you want to continue this work, please reopen or create a new PR.
          exempt-pr-labels: 'pinned,security,work-in-progress'

          # 通用配置
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: false
