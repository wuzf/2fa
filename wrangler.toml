name = "2fa"
main = "src/worker.js"
compatibility_date = "2024-01-13"
workers_dev = true

# KV å‘½åç©ºé—´
# éƒ¨ç½²æ—¶ç”± scripts/deploy.js è‡ªåŠ¨æŸ¥æ‰¾æˆ–åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
# æœ¬åœ°å¼€å‘å¦‚éœ€æŒ‡å®š IDï¼Œå¯å–æ¶ˆæ³¨é‡Šä¸‹æ–¹ä¸‰è¡Œ
# [[kv_namespaces]]
# binding = "SECRETS_KV"
# id = "your-kv-namespace-id"
# preview_id = "your-preview-kv-namespace-id"

# ç¯å¢ƒå˜é‡ (Secrets)
# æ³¨æ„ï¼šæ•æ„Ÿä¿¡æ¯ä½¿ç”¨ Cloudflare Secrets å®‰å…¨å­˜å‚¨
#
# ç”Ÿäº§ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰è®¾ç½®ï¼š
#   npx wrangler secret put ENCRYPTION_KEY    # åŠ å¯†å¯†é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºæ•°æ®åŠ å¯†ï¼‰
#
# å¼€å‘ç¯å¢ƒè®¾ç½®ï¼š
#   npx wrangler secret put ENCRYPTION_KEY --env development
#
# è¯¦ç»†é…ç½®æŒ‡å—ï¼šdocs/DEPLOYMENT.md

# å®šæ—¶ä»»åŠ¡é…ç½® - æ¯å¤©å‡Œæ™¨0ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰è‡ªåŠ¨å¤‡ä»½ï¼ˆä»…åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œï¼‰
[triggers]
crons = ["0 16 * * *"]

# ====================================
# ğŸš€ Service Worker è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†
# ====================================
# SW_VERSION å°†åœ¨éƒ¨ç½²æ—¶é€šè¿‡ scripts/generate-version.js è‡ªåŠ¨ç”Ÿæˆ
# æ”¯æŒä¸‰ç§ç‰ˆæœ¬ç­–ç•¥ï¼š
#   - æ—¶é—´æˆ³ï¼ˆé»˜è®¤ï¼‰ï¼šv20250102-123456
#   - Git commitï¼šv<short-hash>
#   - Packageç‰ˆæœ¬ï¼šv1.0.0
#
# ä½¿ç”¨æ–¹å¼ï¼š
#   npm run deploy              # ä½¿ç”¨æ—¶é—´æˆ³ç‰ˆæœ¬
#   npm run deploy:git          # ä½¿ç”¨ git commit ç‰ˆæœ¬
#   npm run deploy:package      # ä½¿ç”¨ package.json ç‰ˆæœ¬
#
# æ³¨æ„ï¼šç‰ˆæœ¬å·ç”±éƒ¨ç½²è„šæœ¬æ³¨å…¥ï¼Œæ­¤å¤„çš„å€¼ä»…ç”¨äºæœ¬åœ°å¼€å‘
[vars]
SW_VERSION = "v1"

# ====================================
# å¼€å‘/æµ‹è¯•ç¯å¢ƒé…ç½®
# ====================================
[env.development]
name = "2fa-dev"

# [[env.development.kv_namespaces]]
# binding = "SECRETS_KV"
# id = "your-dev-kv-namespace-id"
