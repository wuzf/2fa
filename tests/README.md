# æµ‹è¯•å¥—ä»¶

## ğŸ¯ å¿«é€Ÿå¼€å§‹

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è§‚å¯Ÿæ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è·‘ï¼‰
npm run test:watch

# äº¤äº’å¼ UI
npm run test:ui

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“Š å½“å‰çŠ¶æ€

âœ… **598 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡**

| æ¨¡å—                        | æµ‹è¯•æ•°  | è¦†ç›–ç‡      | çŠ¶æ€   |
| --------------------------- | ------- | ----------- | ------ |
| OTP Generator               | 45      | 59%         | âœ…     |
| Encryption                  | 25      | 74%         | âœ…     |
| JWT Authentication          | 52      | æ ¸å¿ƒç®—æ³•    | âœ…     |
| Data Validation             | 68      | **100%** ğŸ† | âœ…     |
| Rate Limiting               | 54      | **96%** ğŸ”¥  | âœ…     |
| API Secrets                 | 31      | 44%         | âœ…     |
| Response Utils              | 35      | **100%** ğŸ† | âœ…     |
| Crypto (E2EE)               | 66      | **97%** ğŸ”¥  | âœ…     |
| Security (å®‰å…¨é…ç½®)         | 47      | **98%** ğŸ”¥  | âœ…     |
| Router Handler (è·¯ç”±å¤„ç†å™¨) | 51      | **100%** ğŸ† | âœ…     |
| Backup (å¤‡ä»½ç³»ç»Ÿ)           | 55      | **98%** ğŸ”¥  | âœ…     |
| **Logger (æ—¥å¿—ç³»ç»Ÿ)**       | **69**  | **96%** ğŸ”¥  | **âœ…** |
| **æ€»è®¡**                    | **598** | **~55%**    | **âœ…** |

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

### OTP ç”Ÿæˆç®—æ³•

- âœ… **RFC 6238 (TOTP)**: 18 ä¸ªå®˜æ–¹æµ‹è¯•å‘é‡
  - SHA1, SHA256, SHA512 ç®—æ³•
  - 6 ä¸ªæ—¶é—´ç‚¹ï¼ˆ1970-2603å¹´ï¼‰
- âœ… **RFC 4226 (HOTP)**: 10 ä¸ªå®˜æ–¹æµ‹è¯•å‘é‡
- âœ… **Base32 è§£ç **: RFC 4648 æ ‡å‡†
- âœ… **åŠŸèƒ½æµ‹è¯•**: é»˜è®¤å‚æ•°ã€æ—¶é—´çª—å£ã€å‰å¯¼é›¶
- âœ… **æ€§èƒ½æµ‹è¯•**: < 100ms å•æ¬¡ï¼Œ< 1s å¹¶å‘ 100 æ¬¡

### åŠ å¯†/è§£å¯† (AES-GCM 256ä½)

- âœ… **åŸºç¡€åŠŸèƒ½**: ç®€å•/å¤æ‚å¯¹è±¡åŠ å¯†å¾€è¿”
- âœ… **å®‰å…¨ç‰¹æ€§**: é”™è¯¯å¯†é’¥æ‹’ç»ã€ç¯¡æ”¹æ£€æµ‹ã€IV éšæœºæ€§
- âœ… **æ•°æ®æ”¯æŒ**: ä¸­æ–‡ã€Emojiã€ç‰¹æ®Šå­—ç¬¦ã€å¤§å‹æ•°æ®
- âœ… **è¾¹ç•Œæ¡ä»¶**: ç©ºå¯¹è±¡ã€æ·±åº¦åµŒå¥—ã€null å¤„ç†
- âœ… **æ€§èƒ½æµ‹è¯•**: < 100ms åŠ å¯†/è§£å¯†

### JWT è®¤è¯ (PBKDF2 + HMAC-SHA256)

- âœ… **å¯†ç å¼ºåº¦éªŒè¯**: é•¿åº¦ã€å¤§å°å†™ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
- âœ… **PBKDF2 å“ˆå¸Œ**: 100,000 è¿­ä»£ã€éšæœºç›ã€SHA-256
- âœ… **å¯†ç éªŒè¯**: æ­£ç¡®å¯†ç æ¥å—ã€é”™è¯¯å¯†ç æ‹’ç»ã€æ ¼å¼éªŒè¯
- âœ… **JWT ç”Ÿæˆ**: HS256 ç­¾åã€Base64URL ç¼–ç ã€è¿‡æœŸæ—¶é—´
- âœ… **JWT éªŒè¯**: ç­¾åéªŒè¯ã€è¿‡æœŸæ£€æŸ¥ã€æ ¼å¼éªŒè¯ã€ç¯¡æ”¹æ£€æµ‹
- âœ… **Cookie å¤„ç†**: HttpOnlyã€Secureã€SameSite=Strict
- âœ… **è·¯å¾„è®¤è¯**: requiresAuth é€»è¾‘æµ‹è¯•
- âœ… **æ€§èƒ½æµ‹è¯•**: PBKDF2 < 500msã€JWT æ“ä½œ < 50ms
- âœ… **å®‰å…¨ç‰¹æ€§**: ç›å€¼éšæœºæ€§ã€æ—¶é—´æˆ³å”¯ä¸€æ€§ã€å¤šè¯­è¨€æ”¯æŒ

### æ•°æ®éªŒè¯ (Base32/OTP/å¯†é’¥) - ğŸ† 100% è¦†ç›–ç‡

- âœ… **Base32 éªŒè¯**: æ ¼å¼éªŒè¯ã€å­—ç¬¦é›†æ£€æŸ¥ã€é•¿åº¦éªŒè¯
- âœ… **å¯†é’¥å¼ºåº¦è¯„ä¼°**: å¼±å¯†é’¥è­¦å‘Šã€ä¸­ç­‰å¯†é’¥å»ºè®®ã€å¼ºå¯†é’¥é€šè¿‡
- âœ… **ä½é•¿åº¦è®¡ç®—**: æ­£ç¡®è®¡ç®— Base32 ç¼–ç çš„ä½æ•° (æ¯8å­—ç¬¦=40ä½)
- âœ… **å¯†é’¥æ•°æ®éªŒè¯**: æœåŠ¡åç§°ã€è´¦æˆ·ã€å¯†é’¥å®Œæ•´æ€§æ£€æŸ¥
- âœ… **OTP å‚æ•°éªŒè¯**: ç±»å‹ã€ä½æ•°ã€å‘¨æœŸã€ç®—æ³•ã€è®¡æ•°å™¨
- âœ… **å¯†é’¥å¯¹è±¡åˆ›å»º**: UUID ç”Ÿæˆã€æ ‡å‡†åŒ–ã€ç±»å‹è½¬æ¢
- âœ… **è¾…åŠ©åŠŸèƒ½**: æ’åºã€å»é‡æ£€æµ‹
- âœ… **è¾¹ç•Œæ¡ä»¶**: ç©ºå€¼ã€è¶…é•¿å­—ç¬¦ä¸²ã€ç‰¹æ®Šå­—ç¬¦ã€ä¸­æ–‡æ”¯æŒ
- âœ… **æ€§èƒ½æµ‹è¯•**: 1000 æ¬¡éªŒè¯ < 100ms

### Rate Limiting (DDoS é˜²æŠ¤) - ğŸ”¥ 96% è¦†ç›–ç‡

- âœ… **Fixed Window Counter ç®—æ³•**: å›ºå®šçª—å£è®¡æ•°å™¨å®ç°
- âœ… **è¯·æ±‚è®¡æ•°**: é¦–æ¬¡è¯·æ±‚ã€å¤šæ¬¡è¯·æ±‚ã€è¶…é™æ‹’ç»
- âœ… **çª—å£ç®¡ç†**: çª—å£è¿‡æœŸé‡ç½®ã€ç‹¬ç«‹å®¢æˆ·ç«¯è®¡æ•°
- âœ… **å®‰å…¨ç‰¹æ€§**: Fail Open ç­–ç•¥ï¼ˆKV é”™è¯¯æ—¶å…è®¸è¯·æ±‚ï¼‰
- âœ… **é™æµå“åº”**: 429 çŠ¶æ€ç ã€Retry-After å¤´ã€X-RateLimit-\* å¤´
- âœ… **å®¢æˆ·ç«¯è¯†åˆ«**: IP æå–ï¼ˆCF-Connecting-IP/X-Real-IP/X-Forwarded-Forï¼‰
- âœ… **Token è¯†åˆ«**: Authorization å¤´æå–ã€ç»„åˆæ¨¡å¼
- âœ… **é¢„è®¾é…ç½®**: loginã€loginStrictã€apiã€sensitiveã€bulkã€global
- âœ… **ä¸­é—´ä»¶æ¨¡å¼**: withRateLimit åŒ…è£…å™¨
- âœ… **æ€§èƒ½æµ‹è¯•**: 100 æ¬¡æ£€æŸ¥ < 1sã€å¹¶å‘è¯·æ±‚å¤„ç†
- âœ… **è¾¹ç•Œæ¡ä»¶**: æé•¿ keyã€ç‰¹æ®Šå­—ç¬¦ã€æçŸ­çª—å£

### API Secrets (å¯†é’¥ç®¡ç†) - 44% è¦†ç›–ç‡

- âœ… **handleGetSecrets**: è·å–å¯†é’¥åˆ—è¡¨ã€è§£å¯†ã€æ’åºã€é”™è¯¯å¤„ç†
- âœ… **handleAddSecret**: æ·»åŠ å¯†é’¥ã€æ•°æ®éªŒè¯ã€é‡å¤æ£€æµ‹ã€å¼±å¯†é’¥è­¦å‘Š
- âœ… **handleUpdateSecret**: æ›´æ–°å¯†é’¥ã€é‡å¤æ£€æµ‹ã€ä¿ç•™IDå’Œæ—¶é—´æˆ³
- âœ… **handleDeleteSecret**: åˆ é™¤å¯†é’¥ã€éªŒè¯å­˜åœ¨æ€§ã€ä¸å½±å“å…¶ä»–å¯†é’¥
- âœ… **handleBatchAddSecrets**: æ‰¹é‡å¯¼å…¥ã€è·³è¿‡æ— æ•ˆ/é‡å¤å¯†é’¥ã€ç»“æœç»Ÿè®¡
- âœ… **handleGenerateOTP**: ç”Ÿæˆ6/8ä½OTPã€æ”¯æŒå‚æ•°ã€JSON/HTMLå“åº”
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´CRUDæµç¨‹ã€æ•°æ®åŠ å¯†é€æ˜æ€§ã€å¤šå¯†é’¥ç®¡ç†
- âœ… **éªŒè¯æµ‹è¯•**: ç©ºåç§°æ‹’ç»ã€æ— æ•ˆBase32æ‹’ç»ã€æ— æ•ˆOTPå‚æ•°æ‹’ç»
- âœ… **é‡å¤æ£€æµ‹**: ç›¸åŒåç§°+è´¦æˆ·æ‹’ç»ã€ä¸åŒè´¦æˆ·å…è®¸
- âœ… **åŠ å¯†å­˜å‚¨**: AES-GCM 256ä½ã€è‡ªåŠ¨åŠ å¯†/è§£å¯†ã€æ ¼å¼éªŒè¯(v1:IV:data)

### Response Utils (å“åº”å·¥å…·) - ğŸ† 100% è¦†ç›–ç‡

- âœ… **createJsonResponse**: åˆ›å»ºJSONå“åº”ã€çŠ¶æ€ç ã€å®‰å…¨å¤´ã€CORSå¤´
- âœ… **createErrorResponse**: æ ‡å‡†é”™è¯¯å“åº”ã€ISO 8601æ—¶é—´æˆ³ã€é”™è¯¯è¯¦æƒ…
- âœ… **createSuccessResponse**: æˆåŠŸå“åº”å°è£…ã€ç»Ÿä¸€æ ¼å¼ã€æ•°æ®åŒ…è£…
- âœ… **createHtmlResponse**: HTMLå“åº”ã€å­—ç¬¦é›†ã€å®‰å…¨å¤´é›†æˆ
- âœ… **å®‰å…¨å¤´é›†æˆ**: X-Frame-Optionsã€X-Content-Type-Optionsã€Referrer-Policy
- âœ… **CORSå¤„ç†**: åŠ¨æ€originéªŒè¯ã€å‘åå…¼å®¹æ¨¡å¼ã€è‡ªå®šä¹‰å¤´ä¼˜å…ˆ
- âœ… **è¾¹ç•Œæ¡ä»¶**: å¤§æ•°æ®å¯¹è±¡ã€æé•¿æ¶ˆæ¯ã€ç‰¹æ®Šå­—ç¬¦ã€Unicodeæ”¯æŒ
- âœ… **æ€§èƒ½æµ‹è¯•**: 1000æ¬¡å“åº”åˆ›å»º < 100ms

### Crypto (ç«¯åˆ°ç«¯åŠ å¯† E2EE) - ğŸ”¥ 97% è¦†ç›–ç‡

- âœ… **deriveKey**: PBKDF2-SHA256 å¯†é’¥æ´¾ç”Ÿï¼Œ100,000 è¿­ä»£ï¼Œç›å€¼éªŒè¯
- âœ… **encryptData**: AES-256-GCM åŠ å¯†ï¼Œéšæœº IV/Saltï¼Œæ—¶é—´æˆ³ç”Ÿæˆ
- âœ… **decryptData**: AES-GCM è§£å¯†ï¼Œé”™è¯¯å¯†ç æ‹’ç»ï¼Œç¯¡æ”¹æ£€æµ‹
- âœ… **verifyMasterPassword**: ä¸»å¯†ç éªŒè¯ï¼Œé”™è¯¯å¤„ç†
- âœ… **isEncrypted**: åŠ å¯†æ•°æ®è¯†åˆ«ï¼Œæ ¼å¼éªŒè¯
- âœ… **evaluatePasswordStrength**: å¯†ç å¼ºåº¦è¯„åˆ†ï¼ˆå¼±/ä¸­ç­‰/å¼ºï¼‰ï¼Œå¤šè§„åˆ™æ£€æŸ¥
- âœ… **å®‰å…¨ç‰¹æ€§**: å¯†é’¥ä¸å¯å¯¼å‡ºã€éšæœºç›å€¼/IVã€ç¯¡æ”¹ä¿æŠ¤
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´åŠ å¯†/è§£å¯†æµç¨‹ã€å¯†ç æ›´æ”¹ã€å¤šç”¨æˆ·å¹¶å‘
- âœ… **æ€§èƒ½æµ‹è¯•**: PBKDF2 < 1sï¼ŒåŠ å¯†/è§£å¯† < 1.5s
- âœ… **è¾¹ç•Œæ¡ä»¶**: æé•¿å¯†ç ã€ç‰¹æ®Šå­—ç¬¦ã€Unicodeã€ç©ºå¯¹è±¡

### Security (å®‰å…¨é…ç½®) - ğŸ”¥ 98% è¦†ç›–ç‡

- âœ… **getAllowedOrigin**: åŒæºæ£€æµ‹ã€åè®®åŒ¹é…ã€localhostç‰¹æ®Šå¤„ç†
- âœ… **isOriginAllowed**: Hostæ¯”å¯¹ã€è·¨åŸŸç­–ç•¥ã€ç«¯å£å¤„ç†
- âœ… **getSecurityHeaders**: å®Œæ•´å®‰å…¨å¤´ã€å¯é€‰CORSã€å¯é€‰CSPã€å¯é€‰å‡­æ®
- âœ… **getCorsPreflightHeaders**: é¢„æ£€å“åº”å¤´ã€æ–¹æ³•/å¤´å…è®¸ã€å‡­æ®æ”¯æŒ
- âœ… **isPreflightRequest**: OPTIONSè¯†åˆ«ã€Access-Control-Request-Methodæ£€æŸ¥
- âœ… **createPreflightResponse**: 204/403å“åº”ã€å®Œæ•´é¢„æ£€å¤´ã€CORSé”™è¯¯å¤„ç†
- âœ… **mergeSecurityHeaders**: å¤´åˆå¹¶ç­–ç•¥ã€ä¼˜å…ˆçº§å¤„ç†ã€é€‰é¡¹ä¼ é€’
- âœ… **getCSPPolicy**: CSPç­–ç•¥å­—ç¬¦ä¸²ã€CDNç™½åå•ã€æŒ‡ä»¤å®Œæ•´æ€§
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´åŒæºæµç¨‹ã€é¢„æ£€æµç¨‹ã€è·¨åŸŸæ‹’ç»åœºæ™¯
- âœ… **è¾¹ç•Œæ¡ä»¶**: ç©ºHostã€ç•¸å½¢URLã€IPv6ã€ç«¯å£å¤„ç†
- âœ… **æ€§èƒ½æµ‹è¯•**: 1000æ¬¡è°ƒç”¨ < 100ms

### Router Handler (è·¯ç”±å¤„ç†å™¨) - ğŸ† 100% è¦†ç›–ç‡

- âœ… **é¦–æ¬¡è®¾ç½®æµç¨‹**: è®¾ç½®é¡µé¢æ¸²æŸ“ã€å®Œæˆåé‡å®šå‘ã€APIè¯·æ±‚å¤„ç†
- âœ… **è®¤è¯æ£€æŸ¥**: verifyAuthé›†æˆã€401å“åº”ã€503é”™è¯¯ï¼ˆæœªé…ç½®KVã€æœªè®¾ç½®å¯†ç ï¼‰
- âœ… **é™æ€èµ„æºè·¯ç”±**: ä¸»é¡µé¢ã€PWA manifestã€Service Workerã€å›¾æ ‡æ–‡ä»¶
- âœ… **ç™»å½•å’ŒTokenåˆ·æ–°**: handleLoginé›†æˆã€handleRefreshTokené›†æˆ
- âœ… **APIè·¯ç”±åˆ†å‘**: CRUDæ“ä½œï¼ˆGET/POST/PUT/DELETEï¼‰ã€æ–¹æ³•éªŒè¯ã€404å¤„ç†
  - `/api/secrets` - å¯†é’¥åˆ—è¡¨å’Œæ·»åŠ 
  - `/api/secrets/batch` - æ‰¹é‡å¯¼å…¥
  - `/api/secrets/{id}` - æ›´æ–°å’Œåˆ é™¤
  - `/api/backup` - å¤‡ä»½åˆ›å»ºå’Œè·å–
  - `/api/backup/restore` - æ¢å¤å¤‡ä»½
  - `/api/backup/export/{key}` - å¯¼å‡ºå¤‡ä»½
- âœ… **OTPç”Ÿæˆè·¯ç”±**: `/otp`ä½¿ç”¨è¯´æ˜ã€`/otp/{secret}`ç”Ÿæˆã€æŸ¥è¯¢å‚æ•°ä¼ é€’
- âœ… **404å’Œé”™è¯¯å¤„ç†**: æœªçŸ¥è·¯å¾„404ã€å¼‚å¸¸æ•è·500ã€é”™è¯¯æ—¥å¿—è®°å½•
- âœ… **CORSå¤„ç†**: é¢„æ£€è¯·æ±‚è¯†åˆ«ã€204å“åº”ã€éé¢„æ£€è¿”å›null
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´CRUDæµç¨‹ã€å¤‡ä»½æµç¨‹ã€å…¬å¼€OTPè·¯ç”±
- âœ… **è¾¹ç•Œæ¡ä»¶**: æ— KVç¯å¢ƒã€æé•¿è·¯å¾„ã€ç‰¹æ®Šå­—ç¬¦ã€æŸ¥è¯¢å‚æ•°
- âœ… **æ€§èƒ½æµ‹è¯•**: 100æ¬¡è·¯ç”±åŒ¹é… < 500ms

### Backup (å¤‡ä»½ç³»ç»Ÿ) - ğŸ”¥ 98% è¦†ç›–ç‡

- âœ… **BackupManager**: æ„é€ å‡½æ•°åˆå§‹åŒ–ã€çŠ¶æ€ç®¡ç†ã€å•ä¾‹æ¨¡å¼
- âœ… **é˜²æŠ–æœºåˆ¶**: shouldBackupæ£€æŸ¥ã€5åˆ†é’Ÿé˜²æŠ–é—´éš”ã€é¦–æ¬¡ç«‹å³æ‰§è¡Œ
- âœ… **æ‰§è¡Œå¤‡ä»½**: executeBackupæ ¸å¿ƒé€»è¾‘ã€åŠ å¯†/æ˜æ–‡å¤‡ä»½ã€å¤‡ä»½æ•°æ®ç»“æ„
- âœ… **äº‹ä»¶é©±åŠ¨**: triggerBackupè§¦å‘ã€immediateç«‹å³æ¨¡å¼ã€é˜²æŠ–è°ƒåº¦
- âœ… **å»¶è¿Ÿå¤‡ä»½**: setTimeoutè°ƒåº¦ã€å–æ¶ˆå¾…å¤„ç†å¤‡ä»½ã€å»¶è¿Ÿæ‰§è¡ŒéªŒè¯
- âœ… **å¤‡ä»½æ–‡ä»¶å**: ç”Ÿæˆæ ¼å¼ï¼ˆbackup_YYYY-MM-DD_HH-MM-SS.jsonï¼‰ã€æ—¶é—´æˆ³å”¯ä¸€æ€§
- âœ… **è‡ªåŠ¨æ¸…ç†**: \_cleanupOldBackupsAsyncã€ä¿ç•™æœ€æ–°100ä¸ªã€æŒ‰æ–‡ä»¶åæ’åº
- âœ… **çŠ¶æ€è·Ÿè¸ª**: lastBackupTimeã€getTimeSinceLastBackupã€backupInProgressæ ‡å¿—
- âœ… **å–æ¶ˆæœºåˆ¶**: cancelPendingBackupã€æ¸…ç†timeoutã€çŠ¶æ€é‡ç½®
- âœ… **å·¥å‚å‡½æ•°**: getBackupManagerå•ä¾‹ã€envéš”ç¦»ã€å®ä¾‹å¤ç”¨
- âœ… **å¿«æ·æ–¹æ³•**: triggerBackupåŒ…è£…ã€executeImmediateBackupç«‹å³æ‰§è¡Œ
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´å¤‡ä»½æµç¨‹ã€åŠ å¯†å¯¹æ¯”ã€é˜²æŠ–æ··åˆåœºæ™¯
- âœ… **æ€§èƒ½ç›‘æ§**: recordMetricé›†æˆã€é”™è¯¯ä¸å½±å“å¤‡ä»½
- âœ… **é”™è¯¯ç›‘æ§**: captureErroré›†æˆã€ç›‘æ§ç³»ç»Ÿå¼‚å¸¸å¤„ç†
- âœ… **è¾¹ç•Œæ¡ä»¶**: æå¤§æ•°é‡å¯†é’¥ã€ç©ºåˆ—è¡¨ã€ç‰¹æ®Šå­—ç¬¦ã€KVé”™è¯¯å¤„ç†
- âœ… **æ€§èƒ½æµ‹è¯•**: å¤‡ä»½ < 1sã€é˜²æŠ–æ£€æŸ¥1000æ¬¡ < 10ms

### Logger (æ—¥å¿—ç³»ç»Ÿ) - ğŸ”¥ 96% è¦†ç›–ç‡

- âœ… **LogLevel æšä¸¾**: 5 ä¸ªæ—¥å¿—çº§åˆ«ï¼ˆDEBUG < INFO < WARN < ERROR < FATALï¼‰ã€é€’å¢éªŒè¯
- âœ… **Logger ç±»æ„é€ **: é»˜è®¤é…ç½®ã€è‡ªå®šä¹‰é…ç½®ã€enableConsole é»˜è®¤ true
- âœ… **æ¶ˆæ¯æ ¼å¼åŒ–**: åŸºæœ¬æ—¥å¿—ã€é™„åŠ æ•°æ®ã€é”™è¯¯ä¿¡æ¯ã€ä¸Šä¸‹æ–‡ã€å›¾æ ‡éªŒè¯
- âœ… **å¤´éƒ¨æ¸…ç†**: æ•æ„Ÿå¤´éƒ¨è„±æ•ï¼ˆauthorization/cookie/x-api-keyï¼‰ã€ä¿ç•™éæ•æ„Ÿå¤´
- âœ… **æ§åˆ¶å°è¾“å‡º**: DEBUGâ†’console.debugã€INFOâ†’console.logã€WARNâ†’console.warnã€ERROR/FATALâ†’console.error
- âœ… **è¿œç¨‹æ—¥å¿—**: enableRemote å¼€å…³ã€POST å‘é€ã€fetch å¤±è´¥å®¹é”™
- âœ… **æ—¥å¿—æ–¹æ³•**: debug/info/warn/error/fatalã€æ—¥å¿—çº§åˆ«è¿‡æ»¤ã€é”™è¯¯å¯¹è±¡æ”¯æŒ
- âœ… **å­ Logger**: child() åˆ›å»ºã€ä¸Šä¸‹æ–‡ç»§æ‰¿ã€ä¸Šä¸‹æ–‡è¦†ç›–
- âœ… **é…ç½®ç®¡ç†**: setMinLevel åŠ¨æ€è°ƒæ•´ã€setRemoteLogging å¯ç”¨/ç¦ç”¨
- âœ… **å•ä¾‹æ¨¡å¼**: getLogger å·¥å‚å‡½æ•°ã€ç¯å¢ƒå˜é‡é…ç½®ï¼ˆLOG_LEVEL/ENVIRONMENTï¼‰
- âœ… **å¿«æ·æ–¹æ³•**: log.debug/info/warn/error/fatal å…¨å±€å¿«æ·æ–¹å¼
- âœ… **æ€§èƒ½è®¡æ—¶**: PerformanceTimer ç±»ã€checkpoint æ£€æŸ¥ç‚¹ã€end å®Œæˆè®¡æ—¶ã€cancel å–æ¶ˆ
- âœ… **è¯·æ±‚æ—¥å¿—**: createRequestLogger ä¸­é—´ä»¶ã€logRequest è®°å½•è¯·æ±‚ã€logResponse è®°å½•å“åº”
- âœ… **çŠ¶æ€ç åˆ†ç±»**: 2xxâ†’infoã€4xxâ†’warnã€5xxâ†’errorã€è¯·æ±‚å¤±è´¥â†’error
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´è¯·æ±‚æµç¨‹ã€ä¸Šä¸‹æ–‡å±‚çº§ã€æ€§èƒ½ä¸æ—¥å¿—é›†æˆ
- âœ… **è¾¹ç•Œæ¡ä»¶**: ç©ºæ¶ˆæ¯ã€nullæ•°æ®ã€undefinedã€ç‰¹æ®Šå­—ç¬¦ã€æé•¿æ¶ˆæ¯ã€å¾ªç¯å¼•ç”¨
- âœ… **æ€§èƒ½æµ‹è¯•**: 1000 æ¡æ—¥å¿— < 1sã€100 ä¸ªå­ Logger < 100ms

## ğŸ› å·²ä¿®å¤çš„ Bug

### Bug #1: å¤§æ—¶é—´æˆ³ç²¾åº¦é”™è¯¯

- **ç—‡çŠ¶**: æ—¶é—´æˆ³ > 2^32 æ—¶ OTP è®¡ç®—é”™è¯¯
- **åŸå› **: 64 ä½ counter æœªæ­£ç¡®æ‹†åˆ†ä¸ºé«˜/ä½ 32 ä½
- **ä¿®å¤**: æ­£ç¡®å®ç°å¤§ç«¯åº 64 ä½æ•´æ•°ç¼–ç 
- **æµ‹è¯•**: é€šè¿‡ 2603 å¹´çš„ RFC æµ‹è¯•å‘é‡

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ secrets.test.js          # API å¯†é’¥ç®¡ç†æµ‹è¯• (31 ä¸ª)
â”œâ”€â”€ otp/
â”‚   â””â”€â”€ generator.test.js        # OTP ç®—æ³•æµ‹è¯• (45 ä¸ª)
â”œâ”€â”€ router/
â”‚   â””â”€â”€ handler.test.js          # è·¯ç”±å¤„ç†å™¨æµ‹è¯• (51 ä¸ª) ğŸ† 100% è¦†ç›–ç‡
â””â”€â”€ utils/
    â”œâ”€â”€ encryption.test.js       # åŠ å¯†åŠŸèƒ½æµ‹è¯• (25 ä¸ª)
    â”œâ”€â”€ auth.test.js             # JWT è®¤è¯æµ‹è¯• (52 ä¸ª)
    â”œâ”€â”€ validation.test.js       # æ•°æ®éªŒè¯æµ‹è¯• (68 ä¸ª) ğŸ† 100% è¦†ç›–ç‡
    â”œâ”€â”€ rateLimit.test.js        # Rate Limiting æµ‹è¯• (54 ä¸ª) ğŸ”¥ 96% è¦†ç›–ç‡
    â”œâ”€â”€ response.test.js         # Response å·¥å…·æµ‹è¯• (35 ä¸ª) ğŸ† 100% è¦†ç›–ç‡
    â”œâ”€â”€ crypto.test.js           # Crypto E2EE æµ‹è¯• (66 ä¸ª) ğŸ”¥ 97% è¦†ç›–ç‡
    â”œâ”€â”€ security.test.js         # Security å®‰å…¨æµ‹è¯• (47 ä¸ª) ğŸ”¥ 98% è¦†ç›–ç‡
    â”œâ”€â”€ backup.test.js           # Backup å¤‡ä»½æµ‹è¯• (55 ä¸ª) ğŸ”¥ 98% è¦†ç›–ç‡
    â””â”€â”€ logger.test.js           # Logger æ—¥å¿—æµ‹è¯• (69 ä¸ª) ğŸ”¥ 96% è¦†ç›–ç‡
```

## ğŸ“ˆ è¦†ç›–ç‡è¯¦æƒ…

```bash
npm run test:coverage
```

è¦†ç›–ç‡æŠ¥å‘Šä¼šç”Ÿæˆåœ¨ `coverage/` ç›®å½•ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ `coverage/index.html` æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šã€‚

## ğŸš€ ä¸‹ä¸€æ­¥

### é«˜ä¼˜å…ˆçº§

- [x] æ•°æ®éªŒè¯æµ‹è¯• (validation.js) - âœ… **å·²å®Œæˆ 68 ä¸ªæµ‹è¯•ï¼Œ100% è¦†ç›–ç‡** ğŸ†
- [x] JWT è®¤è¯æµ‹è¯• (auth.js) - âœ… **å·²å®Œæˆ 52 ä¸ªæµ‹è¯•**
- [x] Rate Limiting æµ‹è¯• (rateLimit.js) - âœ… **å·²å®Œæˆ 54 ä¸ªæµ‹è¯•ï¼Œ96% è¦†ç›–ç‡** ğŸ”¥
- [x] API Secrets æµ‹è¯• (secrets.js) - âœ… **å·²å®Œæˆ 31 ä¸ªæµ‹è¯•ï¼Œ44% è¦†ç›–ç‡**
- [x] å“åº”å·¥å…·æµ‹è¯• (response.js) - âœ… **å·²å®Œæˆ 35 ä¸ªæµ‹è¯•ï¼Œ100% è¦†ç›–ç‡** ğŸ†
- [x] Crypto E2EE æµ‹è¯• (crypto.js) - âœ… **å·²å®Œæˆ 66 ä¸ªæµ‹è¯•ï¼Œ97% è¦†ç›–ç‡** ğŸ”¥
- [x] Security å®‰å…¨æµ‹è¯• (security.js) - âœ… **å·²å®Œæˆ 47 ä¸ªæµ‹è¯•ï¼Œ98% è¦†ç›–ç‡** ğŸ”¥
- [x] Router Handler è·¯ç”±æµ‹è¯• (handler.js) - âœ… **å·²å®Œæˆ 51 ä¸ªæµ‹è¯•ï¼Œ100% è¦†ç›–ç‡** ğŸ†
- [x] Backup å¤‡ä»½ç³»ç»Ÿæµ‹è¯• (backup.js) - âœ… **å·²å®Œæˆ 55 ä¸ªæµ‹è¯•ï¼Œ98% è¦†ç›–ç‡** ğŸ”¥
- [x] Logger æ—¥å¿—ç³»ç»Ÿæµ‹è¯• (logger.js) - âœ… **å·²å®Œæˆ 69 ä¸ªæµ‹è¯•ï¼Œ96% è¦†ç›–ç‡** ğŸ”¥

### ä¸­ä¼˜å…ˆçº§

- [ ] ç›‘æ§å·¥å…·æµ‹è¯• (monitoring.js)
- [ ] API å¤‡ä»½åŠŸèƒ½æµ‹è¯• (handleBackupSecrets/GetBackups/ExportBackup/RestoreBackup)

### é•¿æœŸ

- [ ] E2E æµ‹è¯• (Playwright)
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

## ğŸ’¡ ç¼–å†™æ–°æµ‹è¯•

1. åœ¨ `tests/` ç›®å½•åˆ›å»ºå¯¹åº”çš„æµ‹è¯•æ–‡ä»¶
2. ä½¿ç”¨ Vitest çš„ `describe` å’Œ `it`
3. å‚è€ƒç°æœ‰æµ‹è¯•çš„ç»“æ„

ç¤ºä¾‹:

```javascript
import { describe, it, expect } from 'vitest';

describe('My Module', () => {
	it('åº”è¯¥æ­£ç¡®å¤„ç†è¾“å…¥', () => {
		expect(myFunction('test')).toBe('expected');
	});
});
```

## ğŸ”¬ æµ‹è¯•å·¥å…·

- **Vitest**: å¿«é€Ÿã€ç°ä»£çš„æµ‹è¯•æ¡†æ¶
- **@vitest/ui**: äº¤äº’å¼æµ‹è¯•ç•Œé¢
- **@vitest/coverage-v8**: V8 å¼•æ“è¦†ç›–ç‡

## ğŸ“š å‚è€ƒ

- [Vitest æ–‡æ¡£](https://vitest.dev/)
- [RFC 6238 - TOTP](https://tools.ietf.org/html/rfc6238)
- [RFC 4226 - HOTP](https://tools.ietf.org/html/rfc4226)
